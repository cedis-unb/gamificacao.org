{{/* People grid from data/people.yaml */}}
{{- $lang := .Page.Lang | default .Site.Language.Lang -}}
{{- $data := site.Data.people -}}
{{- if not $data }}
  <p class="text-neutral-500">{{ if eq $lang "pt" }}Nenhuma pessoa cadastrada.{{ else }}No people data available.{{ end }}</p>
{{- else -}}
  {{- range $group := $data.groups -}}
    {{- $title := index $group.title $lang | default (index $group.title "en") -}}
    {{- with $title -}}
    <h2 class="mt-8 mb-4 text-2xl font-bold">{{ . | markdownify }}</h2>
    {{- end -}}

    <section class="w-full grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      {{- range $person := $group.items -}}
        {{- $name := $person.name -}}
        {{- $url := $person.url | default "" -}}
        {{- $avatar := $person.avatar | default "" -}}
        {{- $card := (printf "<div class=\"h-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-800/50 p-4 shadow hover:shadow-xl transition-shadow\">%%s</div>") -}}

        {{- /* Avatar badge */ -}}
        {{- $badge := "" -}}
        {{- if eq $avatar "m" -}}
          {{- $badge = "<div class=\"h-12 w-12 rounded-full bg-blue-200 text-blue-700 flex items-center justify-center font-semibold\">M</div>" -}}
        {{- else if eq $avatar "f" -}}
          {{- $badge = "<div class=\"h-12 w-12 rounded-full bg-pink-200 text-pink-700 flex items-center justify-center font-semibold\">F</div>" -}}
        {{- else -}}
          {{- $badge = "<div class=\"h-12 w-12 rounded-full bg-neutral-200 text-neutral-700 flex items-center justify-center font-semibold\">?</div>" -}}
        {{- end -}}

        {{- $inner := printf "<div class=\"flex items-center gap-3\">%s<div class=\"min-w-0\"><h3 class=\"text-base font-semibold text-neutral-900 dark:text-neutral\">%s</h3></div></div>" $badge ($name | htmlEscape) -}}

        {{- if ne (len $url) 0 -}}
          <a href="{{ $url }}" target="_blank" rel="noopener" class="group block">{{ printf $card $inner | safeHTML }}</a>
        {{- else -}}
          <div class="group block">{{ printf $card $inner | safeHTML }}</div>
        {{- end -}}
      {{- end -}}
    </section>
  {{- end -}}
{{- end -}}

