{{/* People grid from data/people.yaml */}}
{{- $lang := .Page.Lang | default .Site.Language.Lang -}}
{{- $data := site.Data.people -}}
{{- if not $data }}
  <p class="text-neutral-500">{{ if eq $lang "pt" }}Nenhuma pessoa cadastrada.{{ else }}No people data available.{{ end }}</p>
{{- else -}}
  {{- range $group := $data.groups -}}
    {{- $title := index $group.title $lang | default (index $group.title "en") -}}
    {{- with $title -}}
    <h2 class="mt-8 mb-4 text-2xl font-bold">{{ . | markdownify }}</h2>
    {{- end -}}

    <section class="w-full grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      {{- range $person := $group.items -}}
        {{- $name := $person.name -}}
        {{- $url := $person.url | default "" -}}
        {{- $avatar := $person.avatar | default "" -}}
        {{- /* Badge label: supports map with language keys or a flat string */ -}}
        {{- $badgeLabel := "" -}}
        {{- if reflect.IsMap $person.badge -}}
          {{- $badgeLabel = (index $person.badge $lang) | default (index $person.badge "en") | default "" -}}
        {{- else -}}
          {{- $badgeLabel = $person.badge | default "" -}}
        {{- end -}}

        {{- $img := "" -}}
        {{- if eq $avatar "f" -}}
          {{- $img = (print ("img/avatar-f.svg" | relURL)) -}}
        {{- else -}}
          {{- /* default to male/neutral silhouette */ -}}
          {{- $img = (print ("img/avatar-m.svg" | relURL)) -}}
        {{- end -}}

        <div class="h-full rounded-xl border border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-800/50 p-5 shadow hover:shadow-xl transition-shadow">
          <div class="flex flex-col items-center text-center gap-3">
            <div class="h-12 w-12 rounded-full overflow-hidden ring-2 ring-neutral-200 dark:ring-neutral-700 bg-white">
              <img src="{{ $img }}" alt="Avatar" class="h-full w-full object-contain" loading="lazy" />
            </div>
            <div class="min-w-0">
              <h3 class="text-base font-semibold text-neutral-900 dark:text-neutral">{{ $name }}</h3>
              {{- with $badgeLabel -}}
              <div class="mt-1 inline-block rounded-full bg-primary-100 text-primary-700 dark:bg-primary-400/20 dark:text-primary-300 px-2 py-0.5 text-xs font-medium">
                {{ . }}
              </div>
              {{- end -}}
            </div>
            {{- if ne (len $url) 0 -}}
            <div class="mt-2">
              <a href="{{ $url }}" target="_blank" rel="noopener" class="text-sm text-primary-700 hover:underline dark:text-primary-400">
                {{- if eq $lang "pt" -}}Ver perfil{{- else -}}View profile{{- end -}}
              </a>
            </div>
            {{- end -}}
          </div>
        </div>
      {{- end -}}
    </section>
  {{- end -}}
{{- end -}}
