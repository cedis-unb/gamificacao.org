{{- /* People listing shortcode: renders groups from data/people.yaml with localized labels */ -}}
{{- $lang := .Page.Lang | default "pt" -}}
{{- $data := site.Data.people -}}
{{- if not $data -}}
  <p class="text-neutral-500">{{ if eq $lang "pt" }}Nenhum integrante cadastrado.{{ else }}No members yet.{{ end }}</p>
{{- else -}}

  {{- /* Top navigation pills */ -}}
  <div class="flex flex-wrap gap-2 mb-6">
    {{- range $data.groups -}}
      {{- $title := index .title $lang | default (index .title "en") -}}
      <a href="#{{ .key }}" class="px-3 py-1 rounded-full text-sm bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-700 dark:hover:bg-neutral-600">{{ $title }}</a>
    {{- end -}}
  </div>

  {{- range $data.groups -}}
    {{- $title := index .title $lang | default (index .title "en") -}}
    <h2 id="{{ .key }}">{{ $title }}</h2>
    <div class="grid gap-4 grid-cols-2 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 mb-6">
      {{- range .items -}}
        {{- $avatar := .avatar | default "" -}}
        {{- $img := cond (eq $avatar "f") "/img/avatar-f.svg" (cond (eq $avatar "m") "/img/avatar-m.svg" "") -}}
        {{- $cardClasses := "flex flex-col overflow-hidden rounded-lg shadow-lg bg-neutral-50 dark:bg-neutral-900 transition-transform border border-transparent hover:border-primary-300 hover:shadow-xl hover:scale-[1.01]" -}}
        {{- if .url -}}
          <a href="{{ .url }}" class="{{ $cardClasses }}">
            {{- if $img -}}
              <img src="{{ $img }}" alt="{{ if eq $avatar "f" }}{{ if eq $lang "pt" }}Avatar feminino{{ else }}Female avatar{{ end }}{{ else }}{{ if eq $lang "pt" }}Avatar masculino{{ else }}Male avatar{{ end }}{{ end }}" loading="lazy" class="object-contain bg-neutral-200 dark:bg-neutral-800 p-6 h-40 w-full">
            {{- else -}}
              <div class="flex items-center justify-center h-40 w-full bg-neutral-200 dark:bg-neutral-800 text-5xl">ðŸ‘¤</div>
            {{- end -}}
            <div class="p-3 text-center font-semibold min-h-12 flex items-center justify-center">
              {{ .name }}
              {{- with .badge -}}
                {{- $label := (index . $lang) | default (index . "en") -}}
                {{- if $label -}}<span class="ml-2 inline-flex items-center rounded-full bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300 px-2 py-0.5 text-xs">{{ $label }}</span>{{ end -}}
              {{- end -}}
            </div>
          </a>
        {{- else -}}
          <div class="{{ $cardClasses }}">
            {{- if $img -}}
              <img src="{{ $img }}" alt="{{ if eq $avatar "f" }}{{ if eq $lang "pt" }}Avatar feminino{{ else }}Female avatar{{ end }}{{ else }}{{ if eq $lang "pt" }}Avatar masculino{{ else }}Male avatar{{ end }}{{ end }}" loading="lazy" class="object-contain bg-neutral-200 dark:bg-neutral-800 p-6 h-40 w-full">
            {{- else -}}
              <div class="flex items-center justify-center h-40 w-full bg-neutral-200 dark:bg-neutral-800 text-5xl">ðŸ‘¤</div>
            {{- end -}}
            <div class="p-3 text-center font-semibold min-h-12 flex items-center justify-center">
              {{ .name }}
              {{- with .badge -}}
                {{- $label := (index . $lang) | default (index . "en") -}}
                {{- if $label -}}<span class="ml-2 inline-flex items-center rounded-full bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300 px-2 py-0.5 text-xs">{{ $label }}</span>{{ end -}}
              {{- end -}}
            </div>
          </div>
        {{- end -}}
      {{- end -}}
    </div>
  {{- end -}}

{{- end -}}
